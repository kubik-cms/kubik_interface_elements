!function(){var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},t={},r={},a=e.parcelRequire1900;function n(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}null==a&&((a=function(e){if(e in t)return t[e].exports;if(e in r){var a=r[e];delete r[e];var n={id:e,exports:{}};return t[e]=n,a.call(n.exports,n,n.exports),n.exports}var o=new Error("Cannot find module '"+e+"'");throw o.code="MODULE_NOT_FOUND",o}).register=function(e,t){r[e]=t},e.parcelRequire1900=a),a.register("3pYgF",(function(e,t){var r,a,n,o;r=e.exports,a="Controller",n=function(){return T},o=function(e){return T=e},Object.defineProperty(r,a,{get:n,set:o,enumerable:!0,configurable:!0});function s(e){return e.replace(/(?:[_-])([a-z0-9])/g,((e,t)=>t.toUpperCase()))}function l(e){return e.charAt(0).toUpperCase()+e.slice(1)}function u(e){return e.replace(/([A-Z])/g,((e,t)=>`-${t.toLowerCase()}`))}function i(e,t){const r=d(e);return Array.from(r.reduce(((e,r)=>(function(e,t){const r=e[t];return Array.isArray(r)?r:[]}(r,t).forEach((t=>e.add(t))),e)),new Set))}function c(e,t){return d(e).reduce(((e,r)=>(e.push(...function(e,t){const r=e[t];return r?Object.keys(r).map((e=>[e,r[e]])):[]}(r,t)),e)),[])}function d(e){const t=[];for(;e;)t.push(e),e=Object.getPrototypeOf(e);return t.reverse()}"function"==typeof Object.getOwnPropertySymbols||Object.getOwnPropertyNames,(()=>{function e(e){function t(){return Reflect.construct(e,arguments,new.target)}return t.prototype=Object.create(e.prototype,{constructor:{value:t}}),Reflect.setPrototypeOf(t,e),t}try{(function(){const t=e((function(){this.a.call(this)}));t.prototype.a=function(){},new t})()}catch(e){return e=>class extends e{}}})();function g([e,t]){return function(e,t){const r=`${u(e)}-value`,a=function(e){const t=function(e){const t=f(e.type);if(t){const r=h(e.default);if(t!==r)throw new Error(`Type "${t}" must match the type of the default value. Given default value: "${e.default}" as "${r}"`);return t}}(e),r=h(e),a=f(e),n=t||r||a;if(n)return n;throw new Error(`Unknown value type "${e}"`)}(t);return{type:a,key:r,name:s(r),get defaultValue(){return function(e){const t=f(e);if(t)return m[t];const r=e.default;return void 0!==r?r:e}(t)},get hasCustomDefaultValue(){return void 0!==h(t)},reader:p[a],writer:b[a]||b.default}}(e,t)}function f(e){switch(e){case Array:return"array";case Boolean:return"boolean";case Number:return"number";case Object:return"object";case String:return"string"}}function h(e){switch(typeof e){case"boolean":return"boolean";case"number":return"number";case"string":return"string"}return Array.isArray(e)?"array":"[object Object]"===Object.prototype.toString.call(e)?"object":void 0}const m={get array(){return[]},boolean:!1,number:0,get object(){return{}},string:""},p={array(e){const t=JSON.parse(e);if(!Array.isArray(t))throw new TypeError("Expected array");return t},boolean:e=>!("0"==e||"false"==e),number:e=>Number(e),object(e){const t=JSON.parse(e);if(null===t||"object"!=typeof t||Array.isArray(t))throw new TypeError("Expected object");return t},string:e=>e},b={default:function(e){return`${e}`},array:y,object:y};function y(e){return JSON.stringify(e)}class T{static get shouldLoad(){return!0}get application(){return this.context.application}get scope(){return this.context.scope}get element(){return this.scope.element}get identifier(){return this.scope.identifier}get targets(){return this.scope.targets}get classes(){return this.scope.classes}get data(){return this.scope.data}initialize(){}connect(){}disconnect(){}dispatch(e,{target:t=this.element,detail:r={},prefix:a=this.identifier,bubbles:n=!0,cancelable:o=!0}={}){const s=new CustomEvent(a?`${a}:${e}`:e,{detail:r,bubbles:n,cancelable:o});return t.dispatchEvent(s),s}constructor(e){this.context=e}}T.blessings=[function(e){return i(e,"classes").reduce(((e,t)=>{return Object.assign(e,{[`${r=t}Class`]:{get(){const{classes:e}=this;if(e.has(r))return e.get(r);{const t=e.getAttributeName(r);throw new Error(`Missing attribute "${t}"`)}}},[`${r}Classes`]:{get(){return this.classes.getAll(r)}},[`has${l(r)}Class`]:{get(){return this.classes.has(r)}}});var r}),{})},function(e){return i(e,"targets").reduce(((e,t)=>{return Object.assign(e,{[`${r=t}Target`]:{get(){const e=this.targets.find(r);if(e)return e;throw new Error(`Missing target element "${r}" for "${this.identifier}" controller`)}},[`${r}Targets`]:{get(){return this.targets.findAll(r)}},[`has${l(r)}Target`]:{get(){return this.targets.has(r)}}});var r}),{})},function(e){const t=c(e,"values"),r={valueDescriptorMap:{get(){return t.reduce(((e,t)=>{const r=g(t),a=this.data.getAttributeNameForKey(r.key);return Object.assign(e,{[a]:r})}),{})}}};return t.reduce(((e,t)=>Object.assign(e,function(e){const t=g(e),{key:r,name:a,reader:n,writer:o}=t;return{[a]:{get(){const e=this.data.get(r);return null!==e?n(e):t.defaultValue},set(e){void 0===e?this.data.delete(r):this.data.set(r,o(e))}},[`has${l(a)}`]:{get(){return this.data.has(r)||t.hasCustomDefaultValue}}}}(t))),r)}],T.targets=[],T.values={}}));var o=a("3pYgF");class s extends o.Controller{initialize(){this._renderDOMElements(),document.addEventListener("keydown",(e=>{27===e.keyCode&&this.closeModal()}))}connect(){console.log("modal connected")}get modalTemplate(){return this.modalTemplateTarget.innerHTML}selectModal(e){if("return"==this.modalActionValue){const[t,r]=this.modalReturnControllerValue.split("#");this.application.getControllerForElementAndIdentifier(document.getElementById(r),t).receiveModalReturn({payload:{kubik_media_upload_id:parseInt(e.currentTarget.dataset.selectedKubikMediaUploadId),thumb:e.currentTarget.dataset.selectedThumb},return_payload:this.modalReturnPayloadValue}),this.closeModal()}}modalStatusValueChanged(){this.hasModalContainerTarget&&("opened"==this.modalStatusValue?this.modalContainerTarget.classList.add("kubik-modal-element__open"):this.modalContainerTarget.classList.remove("kubik-modal-element__open"))}modalSrcValueChanged(){this.hasModalFrameTarget&&(""==this.modalSrcValue?(this.modalFrameTarget.src=this.modalSrcValue,this.modalFrameTarget.innerHTML=""):this.modalFrameTarget.src=this.modalSrcValue)}modalHeaderValueChanged(){this.hasModalHeaderTarget&&(this.modalHeaderTarget.innerText=this.modalHeaderValue)}openModal(e){this.modalSrcValue=e.currentTarget.attributes.src.value,this.modalHeaderValue=e.currentTarget.dataset.kubikModalHeaderText,this.modalActionValue=e.currentTarget.dataset.kubikModalAction,this.modalReturnControllerValue=e.currentTarget.dataset.kubikModalReturnController,e.currentTarget.dataset.kubikModalReturnPayload&&(this.modalReturnPayloadValue=JSON.parse(e.currentTarget.dataset.kubikModalReturnPayload)),this.modalStatusValue="opened"}modalReturnPayloadValueChanged(){}closeModal(){this.modalStatusValue="closed",this.modalSrcValue="",this.modalHeaderValue="",this.modalActionValue="",this.modalReturnControllerValue="",this.modalReturnPayloadValue={}}_renderDOMElements(){document.getElementById("kubik-modal")||document.body.insertAdjacentHTML("beforeend",this.modalTemplate)}}n(s,"targets",["modalTemplate","modalContainer","modalFrame","modalHeader"]),n(s,"values",{modalHeader:{type:String,default:""},modalStatus:{type:String,default:"closed"},modalSrc:{type:String,default:""},modalAction:{type:String,default:""},modalReturnPayload:{type:Object,default:{}},modalReturnController:{type:String,default:""}})}();
//# sourceMappingURL=index.js.map
